Switched to use fastapi lifespan feature instead of deprecated old way (on_shutdown and on_start)